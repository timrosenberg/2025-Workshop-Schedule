<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>2025 Stetson Saxophone Workshop Schedule</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <header>
    <h1>🎷 2025 Stetson Saxophone Workshop Schedule</h1>
    <button id="menu-toggle" aria-label="Toggle contact menu" aria-expanded="false">☰</button>
    <nav id="contact-menu" aria-hidden="true">
      <a href="sms:+14074940603">📱 Text Dr. Rosenberg</a>
      <a href="tel:+14074940603">📞 Call Dr. Rosenberg</a>
      <a href="mailto:trosenberg@stetson.edu">✉️ Email Dr. Rosenberg</a>
    </nav>
    <div class="notice">⚠️ This is the 2025-05-05 Draft. A final schedule will be released in June.⚠️</div>
    <div class="workshop-banner" id="studentNotice" data-id="day1">
      📢 Welcome to Day 1! Don’t forget your instrument and water bottle!
      <button class="close-banner" aria-label="Dismiss notice">&times;</button>
    </div>
  </header>

  <main>

    <!-- TEST TOGGLE -->
      <div class="test-toggle">
        <label>
          ⏱️ Test Mode:
          <select id="test-mode-select">
            <option value="">(Live Clock)</option>
            <option value="2025-06-23T08:45:00">June 23 @ 8:45 AM</option>
            <option value="2025-06-23T12:15:00">June 23 @ 12:15 PM</option>
            <option value="2025-06-23T13:30:00">June 23 @ 1:30 PM</option>
            <option value="2025-06-23T19:00:00">June 23 @ 7:00 PM</option>
          </select>
        </label>
      </div>

    <!-- NOW/NEXT BOXES -->
    <div class="now-next-container">
      <div class="activity-box">
        <h3>Now</h3>
        <a id="current-activity" href="#">—</a>
      </div>
      <div class="activity-box">
        <h3>Next</h3>
        <a id="next-activity" href="#">—</a>
      </div>
    </div>

    <!-- MONDAY -->
    <details class="day" id="june-23">
      <summary><span>Monday, June 23 — 🎬 Sax & Screen</span></summary>
      <p class="theme-description">Wear something that shows your favorite film or musical!</p>
      <ul>
        <li><time>8:30 - 11:30 AM</time>: Registration – Hatter Hall (<a href="https://maps.app.goo.gl/HKpeWutxRgLNbqmZ6">map</a>)</li>
        <li><time>10:30 - 11:30 AM</time>: Honors Recital Auditions – Hatter Hall, Floor 2</li>
        <li><time>12:00 - 12:45 PM</time>: 🥪 Lunch – Carlton Union Building (CUB) (<a href="https://maps.app.goo.gl/wdAMPGnM3GRCCsnA8">map</a>)
          <ul>
            <li>Students meet in lobby of Hatter Hall.</li>
            <li>Students will be escorted to CUB by workshop staff.</li>
            <li>Students must bring their name badge.</li>
          </ul>
        </li>
        <li><time>1:00 - 1:45 PM</time>: Opening Meeting – Feasel Hall (inside McMahan Hall (<a href="https://maps.app.goo.gl/5mDXBVoTABQhHF5L6">map</a>))
          <ul>
            <li>Bring large ensemble and chamber ensemble instruments.</li>
          </ul>
        </li>
          <li><time>1:45 - 3:15 PM</time>: Rehearsals – Symphonic (Feasel), Concert (Various)
          <ul>
            <li>Symphonic Saxophones (10th-12+ grade): Large Ensemble - Feasel Hall</li>
            <li>Concert Saxophones (7th-9th grade): Chamber Ensembles - Various Rooms</li>
          </ul>
        </li>
        <li><time>3:15 - 4:45 PM</time>: Rehearsals – Symphonic (Various), Concert (Tinsley 132)
          <ul>
            <li>Symphonic Saxophones: Chamber Ensembles - Various Rooms</li>
            <li>Concert Saxophones: Large Ensemble - Tinsley Hall, Room 132 (inside Presser Hall (<a href="https://maps.app.goo.gl/kmcVc2dHF1nawH2Q8">map</a>))</li>
          </ul>
        </li>
        <li><time>5:00 - 6:00 PM</time>: Jazz Classes - Various Rooms</li>
        <li><time>6:15 - 7:00 PM</time>: 🍽️ Dinner – CUB</li>
        <li><time>7:15 - 8:00 PM</time>: Faculty Recital: Saxophone Workshop Staff – Lee Chapel (inside Elizabeth Hall (<a href="https://maps.app.goo.gl/Dvm3E7u6dcQk4WHg7">map</a>))</li>
        <li><time>8:00 - 9:00 PM</time>: Practice or Relax – Presser or Hatter Hall
          <ul>
            <li>Students may stay in Presser to practice or go to Hatter Hall to relax.</li>
            <li>Students will be escorted to Hatter Hall in a group.</li>
          </ul>
        </li>
        <li><time>9:00 - 9:15 PM</time>: Students in Dorm - Hatter Hall</li>
        <li><time>9:15 - 9:30 PM</time>: Hall Meeting – Lounge on your floor in Hatter Hall
          <ul>
            <li>Students will meet with the counselor staff to discuss the rules and procedures for the rest of the week.</li>
          </ul>
        </li>
        <li><time>10:00 PM</time>: 🛌 Lights out</li>
      </ul>
    </details>

    <!-- TUESDAY -->
    <details class="day" id="june-24">
      <summary><span>Tuesday, June 24 — 🦈 Sharks & ✈️ Jets</span></summary>
      <p class="theme-description">Wear something with a shark or jet on it. 🫰… 🫰… 🫰…</p>
      <ul>
        <li><time>7:15 - 8:00 AM</time>: Wake up</li>
        <li><time>8:00 AM</time>: Meet counselors – Hatter Hall</li>
        <li><time>8:15 - 8:45 AM</time>: 🥞 Breakfast – CUB</li>
        <li><time>9:00 - 9:35 AM</time>: Fundamentals – Various Rooms</li>
        <li><time>9:45 - 11:45 AM</time>: Rehearsals – Symphonic (Feasel), Concert (Various)</li>
        <li><time>12:00 - 12:45 PM</time>: 🥪 Lunch – CUB</li>
        <li><time>1:00 - 2:30 PM</time>: Masterclass – Feasel Hall</li>
        <li><time>2:45 - 4:45 PM</time>: Rehearsals – Symphonic (Various), Concert (Tinsley)</li>
        <li><time>5:00 - 6:00 PM</time>: Jazz Classes</li>
        <li><time>6:15 - 7:00 PM</time>: 🍽️ Dinner – CUB</li>
        <li><time>7:15 - 8:00 PM</time>: Recital – Dr. Rosenberg</li>
        <li><time>8:15 - 10:00 PM</time>: 📽️ Movie Night – Location TBA</li>
        <li><time>10:00 PM</time>: 🛌 Lights out</li>
      </ul>
    </details>

    <!-- WEDNESDAY -->
    <details class="day" id="june-25">
      <summary>Wednesday, June 25 — ⚡ Greased Lightning</summary>
      <p class="theme-description">Dress retro! Bandanas, rolled sleeves, bowling shirts, or sunglasses. Inspired by <a href="https://www.nationalworld.com/jpim-static/image/2022/08/09/12/grease%20cast.jpg?width=1200&enable=upscale"><i>Grease</i></a>, <a href="https://i0.wp.com/pepperdinebeacon.com/wp-content/uploads/2021/12/West-Side-Story-Review.png?resize=1140,570&ssl=1"><i>West Side Story</i></a>, <a href="https://i.redd.it/rzwi0hm1hc2a1.jpg"><i>Fame</i></a>, and <a href="https://saltlakemagazine-webaholics.s3.us-west-2.amazonaws.com/wp-content/uploads/2024/08/01133937/The-Cast-of-the-Film-Footloose-from-1984_SLM-JA24_Paramount_Courtesy-Everett-Collection.jpg"><i>Footloose</i></a>.</p>
      <ul>
        <li><time>7:15 - 8:00 AM</time>: Wake up</li>
        <li><time>8:00 AM</time>: Meet counselors – Hatter Hall</li>
        <li><time>8:15 - 8:45 AM</time>: 🥞 Breakfast – CUB</li>
        <li><time>9:00 - 9:35 AM</time>: Fundamentals – Various Rooms</li>
        <li><time>9:45 - 11:45 AM</time>: Rehearsals – Symphonic (Feasel), Concert (Various)</li>
        <li><time>12:00 - 12:45 PM</time>: 🥪 Lunch – CUB</li>
        <li><time>1:00 - 3:00 PM</time>: Rehearsals – Symphonic (Various), Concert (Tinsley)</li>
        <li><time>3:15 - 4:15 PM</time>: Masterclass – Greg Osby</li>
        <li><time>4:25 - 6:00 PM</time>: 🔎 Scavenger Hunt – Feasel & Campus</li>
        <li><time>6:15 - 7:00 PM</time>: 🍽️ Dinner – CUB</li>
        <li><time>7:15 - 8:15 PM</time>: Guest Recital – Greg Osby</li>
        <li><time>8:15 - 9:15 PM</time>: Jam Session – Greg Osby & Band</li>
        <li><time>10:00 PM</time>: 🛌 Lights out</li>
      </ul>
    </details>

    <!-- THURSDAY -->
    <details class="day" id="june-26">
      <summary>Thursday, June 26 — 🐱 Purrs-day Thursday</summary>
      <p class="theme-description">Wear a cat-themed outfit. Bonus points for <a href="https://res.cloudinary.com/hello-tickets/image/upload/c_limit,f_auto,q_auto,w_1920/v1638481741/adhcqgo2sadh0sqskunk.jpg"><i>Cats</i></a> musical merch (no costumes). Bring your camp shirt for the photo!</p>
      <ul>
        <li><time>7:15 - 8:00 AM</time>: Wake up</li>
        <li><time>8:00 AM</time>: Meet counselors – Hatter Hall</li>
        <li><time>8:15 - 8:45 AM</time>: 🥞 Breakfast – CUB</li>
        <li><time>9:00 - 9:35 AM</time>: Fundamentals – Various Rooms</li>
        <li><time>9:45 - 11:45 AM</time>: Rehearsals – Symphonic (Feasel), Concert (Various)</li>
        <li><time>12:00 - 12:45 PM</time>: 🥪 Lunch – CUB</li>
        <li><time>1:00 - 2:30 PM</time>: Masterclass – All-State Prep (by grade)</li>
        <li><time>2:45 - 4:45 PM</time>: Rehearsals – Symphonic (Various), Concert (Tinsley)</li>
        <li><time>5:00 - 5:50 PM</time>: Jazz Classes – Various Rooms</li>
        <li><time>6:00 - 6:10 PM</time>: Workshop Photo – Sampson Steps</li>
        <li><time>6:15 - 7:00 PM</time>: 🍽️ Dinner – CUB</li>
        <li><time>7:15 - 8:15 PM</time>: Young Artist Recital – Lee Chapel</li>
        <li><time>8:15 - 9:00 PM</time>: Practice or Relax</li>
        <li><time>10:00 PM</time>: 🛌 Lights out</li>
      </ul>
    </details>

    <!-- FRIDAY -->
    <details class="day" id="june-27">
      <summary>Friday, June 27 — 🧚‍♀️ Team Pink or 🧙‍♀️ Green</summary>
      <p class="theme-description">Wear pink for <a href="https://en.wikipedia.org/wiki/Glinda">Glinda</a> or green for <a href="https://en.wikipedia.org/wiki/Elphaba">Elphaba</a>… or mix both! Celebrate your team spirit from <a href="https://encrypted-tbn2.gstatic.com/images?q=tbn:ANd9GcQCT41vPi95dKBzcxRq4JRz2kGso3szfkVBLu2qz0dzPejxncrO"><i>Wicked</i></a>.</p>
  <ul>...</ul>
      <ul>
        <li><time>7:15 - 8:00 AM</time>: Wake up</li>
        <li><time>8:15 - 8:45 AM</time>: 🥞 Breakfast</li>
        <li><time>9:00 - 9:35 AM</time>: Fundamentals</li>
        <li><time>9:45 - 11:45 AM</time>: Rehearsals</li>
        <li><time>12:00 - 12:45 PM</time>: 🥪 Lunch</li>
        <li><time>1:00 - 3:00 PM</time>: Rehearsals</li>
        <li><time>3:10 - 4:10 PM</time>: Jazz Classes</li>
        <li><time>4:15 - 6:00 PM</time>: Dress Rehearsal – Lee Chapel</li>
        <li><time>6:15 - 7:00 PM</time>: 🍽️ Dinner</li>
        <li><time>7:30 - 8:45 PM</time>: Chamber Concert – Lee Chapel</li>
        <li><time>10:00 PM</time>: 🛌 Lights out</li>
      </ul>
    </details>

    <!-- SATURDAY -->
    <details class="day" id="june-28">
      <summary>Saturday, June 28 — 🎓 School Spirit Day</summary>
      <p class="theme-description">Show off your school pride with your favorite school-themed attire!</p>
      <ul>
        <li><time>7:00 AM</time>: Early Wake up – Pack & Prep</li>
        <li><time>7:30 - 8:00 AM</time>: 🥞 Breakfast – CUB</li>
        <li><time>8:15 - 9:15 AM</time>: Dress Rehearsals – Symphonic (Feasel), Concert (Tinsley)</li>
        <li><time>9:30 - 11:00 AM</time>: Dress & Checkout – Hatter Hall</li>
        <li><time>11:00 AM</time>: Call Time – Lee Chapel</li>
        <li><time>11:30 - 12:30 PM</time>: Final Concert – Lee Chapel</li>
        <li><time>12:30 - 1:30 PM</time>: Return Equipment – Tinsley Hall</li>
      </ul>
    </details>

    <ul id="schedule-june-23" data-day="june-23" hidden>
      <li data-id="june-23-1"><time>8:30 - 11:30 AM</time>: Registration – Hatter Hall</li>
      <li data-id="june-23-2"><time>10:30 - 11:30 AM</time>: Honors Recital Auditions – Hatter Hall, Floor 2</li>
      <li data-id="june-23-3"><time>12:00 - 12:45 PM</time>: Lunch – CUB</li>
      <li data-id="june-23-4"><time>1:00 - 1:45 PM</time>: Opening Meeting – Feasel Hall</li>
      <li data-id="june-23-5"><time>1:45 - 3:15 PM</time>: Rehearsals – Symphonic (Feasel), Concert (Various)</li>
      <li data-id="june-23-6"><time>3:15 - 4:45 PM</time>: Rehearsals – Symphonic (Various), Concert (Tinsley 132)</li>
      <li data-id="june-23-7"><time>5:00 - 6:00 PM</time>: Jazz Classes</li>
      <li data-id="june-23-8"><time>6:15 - 7:00 PM</time>: Dinner – CUB</li>
      <li data-id="june-23-9"><time>7:15 - 8:00 PM</time>: Faculty Recital – Lee Chapel</li>
      <li data-id="june-23-10"><time>8:00 - 9:00 PM</time>: Practice or Relax</li>
      <li data-id="june-23-11"><time>9:00 - 9:15 PM</time>: Students in Dorm</li>
      <li data-id="june-23-12"><time>9:15 - 9:30 PM</time>: Hall Meeting – Hatter Hall</li>
      <li data-id="june-23-13"><time>10:00 PM</time>: Lights out</li>
    </ul>

    <ul id="schedule-june-24" data-day="june-24" hidden>
      <li data-id="june-24-1"><time>7:15 - 8:00 AM</time>: Wake up</li>
      <li data-id="june-24-2"><time>8:00 AM</time>: Meet counselors</li>
      <li data-id="june-24-3"><time>8:15 - 8:45 AM</time>: Breakfast – CUB</li>
      <li data-id="june-24-4"><time>9:00 - 9:35 AM</time>: Fundamentals – Various</li>
      <li data-id="june-24-5"><time>9:45 - 11:45 AM</time>: Rehearsals – Symphonic / Concert</li>
      <li data-id="june-24-6"><time>12:00 - 12:45 PM</time>: Lunch – CUB</li>
      <li data-id="june-24-7"><time>1:00 - 2:30 PM</time>: Masterclass – Feasel</li>
      <li data-id="june-24-8"><time>2:45 - 4:45 PM</time>: Rehearsals – Various / Tinsley</li>
      <li data-id="june-24-9"><time>5:00 - 6:00 PM</time>: Jazz Classes</li>
      <li data-id="june-24-10"><time>6:15 - 7:00 PM</time>: Dinner – CUB</li>
      <li data-id="june-24-11"><time>7:15 - 8:00 PM</time>: Recital – Dr. Rosenberg</li>
      <li data-id="june-24-12"><time>8:15 - 10:00 PM</time>: Movie Night – TBA</li>
      <li data-id="june-24-13"><time>10:00 PM</time>: Lights out</li>
    </ul>

    <ul id="schedule-june-25" data-day="june-25" hidden>
      <li data-id="june-25-1"><time>7:15 - 8:00 AM</time>: Wake up</li>
      <li data-id="june-25-2"><time>8:00 AM</time>: Meet counselors</li>
      <li data-id="june-25-3"><time>8:15 - 8:45 AM</time>: Breakfast – CUB</li>
      <li data-id="june-25-4"><time>9:00 - 9:35 AM</time>: Fundamentals – Various</li>
      <li data-id="june-25-5"><time>9:45 - 11:45 AM</time>: Rehearsals – Symphonic / Concert</li>
      <li data-id="june-25-6"><time>12:00 - 12:45 PM</time>: Lunch – CUB</li>
      <li data-id="june-25-7"><time>1:00 - 3:00 PM</time>: Rehearsals – Various / Tinsley</li>
      <li data-id="june-25-8"><time>3:15 - 4:15 PM</time>: Masterclass – Greg Osby</li>
      <li data-id="june-25-9"><time>4:25 - 6:00 PM</time>: Scavenger Hunt</li>
      <li data-id="june-25-10"><time>6:15 - 7:00 PM</time>: Dinner – CUB</li>
      <li data-id="june-25-11"><time>7:15 - 8:15 PM</time>: Guest Recital – Greg Osby</li>
      <li data-id="june-25-12"><time>8:15 - 9:15 PM</time>: Jam Session – Greg Osby</li>
      <li data-id="june-25-13"><time>10:00 PM</time>: Lights out</li>
    </ul>

    <ul id="schedule-june-26" data-day="june-26" hidden>
      <li data-id="june-26-1"><time>7:15 - 8:00 AM</time>: Wake up</li>
      <li data-id="june-26-2"><time>8:00 AM</time>: Meet counselors</li>
      <li data-id="june-26-3"><time>8:15 - 8:45 AM</time>: Breakfast – CUB</li>
      <li data-id="june-26-4"><time>9:00 - 9:35 AM</time>: Fundamentals – Various</li>
      <li data-id="june-26-5"><time>9:45 - 11:45 AM</time>: Rehearsals – Symphonic / Concert</li>
      <li data-id="june-26-6"><time>12:00 - 12:45 PM</time>: Lunch – CUB</li>
      <li data-id="june-26-7"><time>1:00 - 2:30 PM</time>: Masterclass – All-State Prep</li>
      <li data-id="june-26-8"><time>2:45 - 4:45 PM</time>: Rehearsals – Various / Tinsley</li>
      <li data-id="june-26-9"><time>5:00 - 5:50 PM</time>: Jazz Classes</li>
      <li data-id="june-26-10"><time>6:00 - 6:10 PM</time>: Workshop Photo – Sampson</li>
      <li data-id="june-26-11"><time>6:15 - 7:00 PM</time>: Dinner – CUB</li>
      <li data-id="june-26-12"><time>7:15 - 8:15 PM</time>: Young Artist Recital – Lee Chapel</li>
      <li data-id="june-26-13"><time>8:15 - 9:00 PM</time>: Practice or Relax</li>
      <li data-id="june-26-14"><time>10:00 PM</time>: Lights out</li>
    </ul>

    <ul id="schedule-june-27" data-day="june-27" hidden>
      <li data-id="june-27-1"><time>7:15 - 8:00 AM</time>: Wake up</li>
      <li data-id="june-27-2"><time>8:15 - 8:45 AM</time>: Breakfast</li>
      <li data-id="june-27-3"><time>9:00 - 9:35 AM</time>: Fundamentals</li>
      <li data-id="june-27-4"><time>9:45 - 11:45 AM</time>: Rehearsals</li>
      <li data-id="june-27-5"><time>12:00 - 12:45 PM</time>: Lunch</li>
      <li data-id="june-27-6"><time>1:00 - 3:00 PM</time>: Rehearsals</li>
      <li data-id="june-27-7"><time>3:10 - 4:10 PM</time>: Jazz Classes</li>
      <li data-id="june-27-8"><time>4:15 - 6:00 PM</time>: Dress Rehearsal – Lee Chapel</li>
      <li data-id="june-27-9"><time>6:15 - 7:00 PM</time>: Dinner</li>
      <li data-id="june-27-10"><time>7:30 - 8:45 PM</time>: Chamber Concert – Lee Chapel</li>
      <li data-id="june-27-11"><time>10:00 PM</time>: Lights out</li>
    </ul>

    <ul id="schedule-june-28" data-day="june-28" hidden>
      <li data-id="june-28-1"><time>7:00 AM</time>: Wake up – Pack & Prep</li>
      <li data-id="june-28-2"><time>7:30 - 8:00 AM</time>: Breakfast – CUB</li>
      <li data-id="june-28-3"><time>8:15 - 9:15 AM</time>: Dress Rehearsals – Feasel / Tinsley</li>
      <li data-id="june-28-4"><time>9:30 - 11:00 AM</time>: Dress & Checkout – Hatter Hall</li>
      <li data-id="june-28-5"><time>11:00 AM</time>: Call Time – Lee Chapel</li>
      <li data-id="june-28-6"><time>11:30 - 12:30 PM</time>: Final Concert – Lee Chapel</li>
      <li data-id="june-28-7"><time>12:30 - 1:30 PM</time>: Return Equipment – Tinsley</li>
    </ul>
  
  </main>

  <footer>
    <p>Created for Stetson Saxophone Workshop • ©2025</p>
  </footer>

<!-- Open the current day's schedule, fallback to Monday -->
<!--   <script>
    document.addEventListener('DOMContentLoaded', () => {
      const now = new Date();
      const options = { month: 'long', day: 'numeric' };
      const todayKey = now.toLocaleDateString('en-US', options)
        .toLowerCase()
        .replace(',', '')
        .replace(' ', '-'); // e.g., "june-24"

      const target = document.getElementById(todayKey) || document.getElementById('june-23');

      if (target) {
        target.setAttribute('open', '');
        target.setAttribute('today', '');

        // 👇 Scroll it into view smoothly
        setTimeout(() => {
          target.scrollIntoView({ behavior: 'smooth', block: 'start' });
        }, 100); // slight delay ensures layout is ready
      }
    });
  </script> -->

<!-- Animations for Hamburger Menu -->
  <script>
    const toggle = document.getElementById('menu-toggle');
    const menu = document.getElementById('contact-menu');

    toggle.addEventListener('click', () => {
      const expanded = toggle.getAttribute('aria-expanded') === 'true';
      toggle.setAttribute('aria-expanded', !expanded);
      menu.setAttribute('aria-hidden', expanded);
      menu.classList.toggle('show');
    });

    document.addEventListener('click', e => {
      if (!toggle.contains(e.target) && !menu.contains(e.target)) {
        toggle.setAttribute('aria-expanded', 'false');
        menu.setAttribute('aria-hidden', 'true');
        menu.classList.remove('show');
      }
    });
  </script>

<!-- Notifications Banner Dismiss Logic -->
  <script>
    const banner = document.getElementById('studentNotice');
    const closeBtn = banner?.querySelector('.close-banner');
    const messageId = banner?.getAttribute('data-id');
    const dismissedId = localStorage.getItem('dismissedNotice');

    // Show banner only if this message hasn't been dismissed
    if (messageId !== dismissedId) {
      banner.style.display = 'block';
    } else {
      banner.style.display = 'none';
    }

    closeBtn?.addEventListener('click', () => {
      banner.style.display = 'none';
      localStorage.setItem('dismissedNotice', messageId);
    });
  </script>

<!-- Now / Next Logic -->
  <script>
  function parseTimeString(timeStr) {
    const [start, end] = timeStr.split(' - ');
    const toDate = str => new Date(`1970-01-01T${convertTo24Hour(str)}`);
    return [toDate(start), end ? toDate(end) : new Date('1970-01-01T23:59')];
  }

  function convertTo24Hour(time) {
    if (!time) return "00:00"; // fallback if null or empty

    if (!time.includes(':')) time = time.replace(/(AM|PM)/, ':00 $1');
    
    const match = time.match(/(\d+):(\d+)\s*(AM|PM)/i);
    if (!match) {
      console.warn("Invalid time format:", time);
      return "00:00";
    }

    const [h, m, ampm] = match.slice(1);
    let hour = parseInt(h, 10);
    if (ampm.toUpperCase() === 'PM' && hour < 12) hour += 12;
    if (ampm.toUpperCase() === 'AM' && hour === 12) hour = 0;
    return `${hour.toString().padStart(2, '0')}:${m}`;
  }


  function scrollToId(id) {
    const target = document.getElementById(id);
    if (target) {
      if (target.tagName.toLowerCase() === 'details') {
        target.open = true;
      }
      target.scrollIntoView({ behavior: "smooth", block: "start" });
      target.classList.add('highlighted');
      setTimeout(() => target.classList.remove('highlighted'), 2000);
    }
  }

  function localDateFromISO(dateString) {
    const [date, time] = dateString.split('T');
    const [y, m, d] = date.split('-').map(Number);
    const [h, min] = time.split(':').map(Number);
    return new Date(y, m - 1, d, h, min);
  }

  function updateNowNextFromHiddenData() {
    const testModeSelect = document.getElementById('test-mode-select');
    const testValue = testModeSelect?.value;
    const now = testValue ? localDateFromISO(testValue) : new Date();

    const month = now.toLocaleString('en-US', { month: 'long' }).toLowerCase();
    const day = now.getDate();
    const scheduleList = document.querySelector(`#schedule-${month}-${day}`) || document.querySelector('#schedule-june-23');

    if (!scheduleList) return;

    const items = Array.from(scheduleList.querySelectorAll('li'));
    const currentTime = new Date(`1970-01-01T${now.toTimeString().slice(0, 5)}`);

    let current = null, next = null;

    for (let i = 0; i < items.length; i++) {
      const timeText = items[i].querySelector('time')?.textContent.trim();
      if (!timeText) continue;
      const [start, end] = parseTimeString(timeText);

      if (currentTime >= start && currentTime < end) {
        current = items[i];
        next = items[i + 1] || null;
        break;
      } else if (currentTime < start && !current && !next) {
        next = items[i];
        break;
      }
    }

    function applyTo(el, item) {
      if (!item) {
        el.textContent = '—';
        el.removeAttribute('href');
        return;
      }
      const id = item.getAttribute('data-id');
      item.id = id;
      item.classList.add('highlighted');

      el.textContent = item.textContent.trim().split('\n')[0];
      el.href = `#${id}`;
      el.onclick = e => {
        e.preventDefault();
        scrollToId(id);
      };
    }

    applyTo(document.getElementById('current-activity'), current);
    applyTo(document.getElementById('next-activity'), next);
  }


  document.addEventListener('DOMContentLoaded', () => {
    document.querySelectorAll('ul[id^="schedule-"] li').forEach(li => {
      const dataId = li.getAttribute('data-id');
      if (dataId) li.id = dataId;
    });

    updateNowNextFromHiddenData();
    setInterval(updateNowNextFromHiddenData, 60000);

    document.getElementById('test-mode-select')?.addEventListener('change', updateNowNextFromHiddenData);
  });
</script>

</body>
</html>